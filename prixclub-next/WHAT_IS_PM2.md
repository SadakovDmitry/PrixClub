# ๐ค ะงัะพ ัะฐะบะพะต PM2?

## ๐ ะัะพัััะผะธ ัะปะพะฒะฐะผะธ

**PM2** โ ััะพ ะฟัะพะณัะฐะผะผะฐ, ะบะพัะพัะฐั **ะดะตัะถะธั ะฒะฐั ัะฐะนั ะทะฐะฟััะตะฝะฝัะผ ะฟะพััะพัะฝะฝะพ** ะฒ ัะพะฝะต ะฝะฐ ัะตัะฒะตัะต.

---

## ๐คท ะะฐัะตะผ ะพะฝ ะฝัะถะตะฝ?

### ะะตะท PM2:

```bash
# ะั ะทะฐะฟััะบะฐะตัะต ัะฐะนั
npm start

# ะกะฐะนั ัะฐะฑะพัะฐะตั...
# โ ะัั ัะพัะพัะพ

# ะะซ ะะะะะซะะะะขะ ะขะะะะะะะ
# โ ะกะฐะนั ะพััะฐะฝะฐะฒะปะธะฒะฐะตััั!

# ะะพะปััะฐะตััั, ััะพะฑั ัะฐะนั ัะฐะฑะพัะฐะป 24/7,
# ะฝัะถะฝะพ ะดะตัะถะฐัั ัะตัะผะธะฝะฐะป ะพัะบััััะผ ะฒัั ะฒัะตะผั
```

### ะก PM2:

```bash
# ะั ะทะฐะฟััะบะฐะตัะต ัะฐะนั ัะตัะตะท PM2
pm2 start npm --name prixclub -- start

# ะกะฐะนั ัะฐะฑะพัะฐะตั ะฒ ัะพะฝะต
# โ ะะพะถะฝะพ ะทะฐะบัััั ัะตัะผะธะฝะฐะป
# โ ะะพะถะฝะพ ะฒัะนัะธ ะธะท SSH
# โ ะกะฐะนั ัะฐะฑะพัะฐะตั 24/7
# โ ะะฒัะพะผะฐัะธัะตัะบะธ ะฟะตัะตะทะฐะฟััะบะฐะตััั ะฟัะธ ะพัะธะฑะบะฐั
```

---

## โ ะัะตะธะผััะตััะฒะฐ PM2

1. **ะกะฐะนั ัะฐะฑะพัะฐะตั ะฟะพััะพัะฝะฝะพ** โ ะฝะต ะฝัะถะฝะพ ะดะตัะถะฐัั ัะตัะผะธะฝะฐะป ะพัะบััััะผ
2. **ะะฒัะพะฟะตัะตะทะฐะฟััะบ** โ ะตัะปะธ ัะฐะนั ัะฟะฐะป, PM2 ะตะณะพ ะฟะพะดะฝะธะผะตั ัะฐะผ
3. **ะะพะณะธ** โ ะผะพะถะฝะพ ะฟะพัะผะพััะตัั ะธััะพัะธั ัะฐะฑะพัั ัะฐะนัะฐ
4. **ะะฒัะพะทะฐะฟััะบ ะฟัะธ ะฟะตัะตะทะฐะณััะทะบะต ัะตัะฒะตัะฐ** โ ะฟะพัะปะต `pm2 startup`
5. **ะะตัะบะพะปัะบะพ ัะฐะนัะพะฒ** โ ะผะพะถะฝะพ ะทะฐะฟัััะธัั ะฝะตัะบะพะปัะบะพ ะฟัะพะตะบัะพะฒ ะพะดะฝะพะฒัะตะผะตะฝะฝะพ

---

## ๐ ะัะฝะพะฒะฝัะต ะบะพะผะฐะฝะดั

### ะะฐะฟััะบ

```bash
# ะะฐะฟัััะธัั ัะฐะนั
pm2 start npm --name prixclub -- start

# ะกะพััะฐะฝะธัั ะบะพะฝัะธะณััะฐัะธั (ััะพะฑั ัะฐะนั ะพััะฐะฒะฐะปัั ะทะฐะฟััะตะฝะฝัะผ)
pm2 save

# ะะฐัััะพะธัั ะฐะฒัะพะทะฐะฟััะบ ะฟัะธ ะฟะตัะตะทะฐะณััะทะบะต ัะตัะฒะตัะฐ
pm2 startup
```

### ะฃะฟัะฐะฒะปะตะฝะธะต

```bash
pm2 list              # ะะพะบะฐะทะฐัั ะฒัะต ะทะฐะฟััะตะฝะฝัะต ัะฐะนัั
pm2 status            # ะกัะฐััั ัะฐะนัะพะฒ
pm2 stop prixclub     # ะััะฐะฝะพะฒะธัั ัะฐะนั
pm2 start prixclub    # ะะฐะฟัััะธัั ัะฐะนั
pm2 restart prixclub  # ะะตัะตะทะฐะฟัััะธัั ัะฐะนั
pm2 delete prixclub   # ะฃะดะฐะปะธัั ัะฐะนั ะธะท PM2
```

### ะะพะณะธ

```bash
pm2 logs prixclub          # ะะพะบะฐะทะฐัั ะปะพะณะธ ัะฐะนัะฐ
pm2 logs prixclub --err    # ะขะพะปัะบะพ ะพัะธะฑะบะธ
pm2 logs prixclub --lines 100  # ะะพัะปะตะดะฝะธะต 100 ัััะพะบ
```

---

## ๐ ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั?

### ะะตะท PM2:

```
ะะฐั ะบะพะผะฟัััะตั/ัะตัะฒะตั:
โโโ ะขะตัะผะธะฝะฐะป ะพัะบััั
โ   โโโ npm start ะทะฐะฟััะตะฝ
โ       โโโ ะกะฐะนั ัะฐะฑะพัะฐะตั ะฝะฐ ะฟะพััั 3000
```

ะัะปะธ ะทะฐะบัััั ัะตัะผะธะฝะฐะป โ ัะฐะนั ะพััะฐะฝะฐะฒะปะธะฒะฐะตััั โ

### ะก PM2:

```
ะะฐั ัะตัะฒะตั:
โโโ PM2 (ัะฐะฑะพัะฐะตั ะบะฐะบ ะดะตะผะพะฝ ะฒ ัะพะฝะต)
โ   โโโ ะัะพัะตัั 1: prixclub (npm start)
โ   โ   โโโ ะกะฐะนั ัะฐะฑะพัะฐะตั ะฝะฐ ะฟะพััั 3000
โ   โโโ ะัะพัะตัั 2: ะดััะณะพะน-ัะฐะนั (ะตัะปะธ ะตััั)
```

PM2 ัะปะตะดะธั ะทะฐ ะฟัะพัะตััะฐะผะธ 24/7 โ ัะฐะนั ะฒัะตะณะดะฐ ัะฐะฑะพัะฐะตั โ

---

## ๐ ะัะธะผะตั ะฒัะฒะพะดะฐ `pm2 status`

```
โโโโโโโฌโโโโโโโโโโโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโโโ
โ id  โ name           โ status  โ cpu     โ memory  โ uptime   โ
โโโโโโโผโโโโโโโโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโโโค
โ 0   โ prixclub       โ online  โ 2%      โ 150 MB  โ 2h 30m   โ
โโโโโโโดโโโโโโโโโโโโโโโโโดโโโโโโโโโโดโโโโโโโโโโดโโโโโโโโโโดโโโโโโโโโโโ
```

- **name** โ ะฝะฐะทะฒะฐะฝะธะต ัะฐะนัะฐ (prixclub)
- **status** โ online = ัะฐะฑะพัะฐะตั โ
- **cpu** โ ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟัะพัะตััะพัะฐ
- **memory** โ ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟะฐะผััะธ
- **uptime** โ ัะบะพะปัะบะพ ัะฐะฑะพัะฐะตั

---

## ๐ ะะฐะบ ัััะฐะฝะพะฒะธัั ะธ ะธัะฟะพะปัะทะพะฒะฐัั

### 1. ะฃััะฐะฝะพะฒะบะฐ (ะพะดะธะฝ ัะฐะท)

```bash
sudo npm install -g pm2
```

### 2. ะะฐะฟััะบ ัะฐะนัะฐ

```bash
cd /var/www/sites/prixclub-site/prixclub-next
pm2 start npm --name prixclub -- start
```

### 3. ะกะพััะฐะฝะธัั ะฝะฐัััะพะนะบะธ

```bash
pm2 save
```

### 4. ะะฐัััะพะธัั ะฐะฒัะพะทะฐะฟััะบ ะฟัะธ ะฟะตัะตะทะฐะณััะทะบะต

```bash
pm2 startup
# ะกะบะพะฟะธััะนัะต ะบะพะผะฐะฝะดั, ะบะพัะพััั ะฟะพะบะฐะถะตั PM2, ะธ ะฒัะฟะพะปะฝะธัะต ะตั
```

---

## ๐ฏ ะะฐัะตะผ ััะพ ะฝัะถะฝะพ ะดะปั ะฒะฐัะตะณะพ ะฟัะพะตะบัะฐ?

### ะะฐั Next.js ัะฐะนั

ะะพัะปะต `npm start` ัะฐะนั ะทะฐะฟััะบะฐะตััั ะฝะฐ ะฟะพััั 3000, ะฝะพ:
- ะัะปะธ ะทะฐะบัััั ัะตัะผะธะฝะฐะป โ ะพััะฐะฝะพะฒะธััั โ
- ะัะปะธ ะฟะตัะตะทะฐะณััะทะธัั ัะตัะฒะตั โ ะพััะฐะฝะพะฒะธััั โ
- ะัะปะธ ะฟัะพะธะทะพะนะดะตั ะพัะธะฑะบะฐ โ ะพััะฐะฝะพะฒะธััั โ

### ะก PM2

ะะพัะปะต `pm2 start npm --name prixclub -- start`:
- ะะฐะฑะพัะฐะตั 24/7 โ
- ะะพะถะฝะพ ะฒััะพะดะธัั ะธะท SSH โ
- ะะตัะตะทะฐะฟััะบ ัะตัะฒะตัะฐ โ ะฐะฒัะพะผะฐัะธัะตัะบะธะน ะทะฐะฟััะบ โ
- ะัะธะฑะบะฐ โ ะฐะฒัะพะผะฐัะธัะตัะบะธะน ะฟะตัะตะทะฐะฟััะบ โ

---

## ๐ ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั ะดะปั ะพัะปะฐะดะบะธ

```bash
# ะะพัะผะพััะตัั, ััะพ ะฟัะพะธััะพะดะธั ั ัะฐะนัะพะผ
pm2 logs prixclub

# ะััะฐะฝะพะฒะธัั ัะฐะนั ะดะปั ะพะฑะฝะพะฒะปะตะฝะธั
pm2 stop prixclub

# ะะฑะฝะพะฒะธัั ะบะพะด
git pull
npm run build

# ะะฐะฟัััะธัั ัะฝะพะฒะฐ
pm2 start prixclub

# ะะปะธ ััะฐะทั ะฟะตัะตะทะฐะฟัััะธัั
pm2 restart prixclub

# ะฃะดะฐะปะธัั ััะฐััั ะฒะตััะธั ะธ ะทะฐะฟัััะธัั ะฝะพะฒัั
pm2 delete prixclub
pm2 start npm --name prixclub -- start
```

---

## โ๏ธ ะะฐะถะฝะพ ะฟะพะผะฝะธัั

1. **PM2 โ ััะพ ะผะตะฝะตะดะถะตั ะฟัะพัะตััะพะฒ**, ะฐ ะฝะต ัะฐััั ะฒะฐัะตะณะพ ัะฐะนัะฐ
2. **ะะพัะปะต ัััะฐะฝะพะฒะบะธ** ะพะฝ ัะฐะฑะพัะฐะตั ะฟะพััะพัะฝะฝะพ ะฒ ัะพะฝะต
3. **`pm2 save`** ะฝัะถะตะฝ, ััะพะฑั ะฝะฐัััะพะนะบะธ ัะพััะฐะฝะธะปะธัั
4. **`pm2 startup`** ะฝัะถะตะฝ, ััะพะฑั ัะฐะนั ะทะฐะฟััะบะฐะปัั ะฟัะธ ะฟะตัะตะทะฐะณััะทะบะต ัะตัะฒะตัะฐ
5. **ะะต ะฝัะถะฝะพ ะทะฐะฟััะบะฐัั** `npm start` ััะบะฐะผะธ, PM2 ะดะตะปะฐะตั ััะพ ัะฐะผ

---

## ๐ PM2 vs npm start

| ะะตะท PM2 | ะก PM2 |
|---------|-------|
| npm start | pm2 start npm --name prixclub -- start |
| ะะฐะฑะพัะฐะตั ะฟะพะบะฐ ะพัะบััั ัะตัะผะธะฝะฐะป | ะะฐะฑะพัะฐะตั 24/7 |
| ะััะฐะฝะฐะฒะปะธะฒะฐะตััั ะฟัะธ ะพัะธะฑะบะต | ะะฒัะพะฟะตัะตะทะฐะฟััะบ |
| ะัะถะฝะพ ะทะฐะฟััะบะฐัั ััะบะฐะผะธ ะฟะพัะปะต ะฟะตัะตะทะฐะณััะทะบะธ | ะะฒัะพะทะฐะฟััะบ |
| ะกะปะพะถะฝะพ ัะผะพััะตัั ะปะพะณะธ | pm2 logs |
| ะะตั ะผะพะฝะธัะพัะธะฝะณะฐ | pm2 status, pm2 monit |

---

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝะพ

### ะะพะปะตะทะฝัะต PM2 ะบะพะผะฐะฝะดั:

```bash
pm2 monit              # ะะพะฝะธัะพั ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
pm2 reload prixclub    # Graceful reload (ะฑะตะท ะพััะฐะฝะพะฒะบะธ)
pm2 scale prixclub 4   # ะะฐะฟัััะธัั 4 ะบะพะฟะธะธ ัะฐะนัะฐ
pm2 reset prixclub     # ะกะฑัะพัะธัั ััะตััะธะบะธ
```

### ะะปั ะฒะฐัะตะณะพ ะฟัะพะตะบัะฐ:

```bash
# ะะพะปะฝัะน ัะธะบะป ัะฐะฑะพัั:
git pull                    # ะกะบะฐัะฐัั ะพะฑะฝะพะฒะปะตะฝะธั
npm run build              # ะกะพะฑัะฐัั ะฟัะพะตะบั
pm2 restart prixclub       # ะะตัะตะทะฐะฟัััะธัั ัะฐะนั

# ะัะพะฒะตัะบะฐ:
pm2 status                 # ะกัะฐััั
pm2 logs prixclub          # ะะพะณะธ
curl http://localhost:3000 # ะัะพะฒะตัะบะฐ ัะฐะฑะพัั
```

---

## โจ ะัะพะณ

**PM2** โ ััะพ **ะฝะตะพะฑัะพะดะธะผัะน ะธะฝััััะผะตะฝั** ะดะปั ะฟัะพะดะฐะบัะฝ ัะตัะฒะตัะพะฒ.

ะะตะท ะฝะตะณะพ ะฒะฐั ัะฐะนั ะฑัะดะตั ัะฐะฑะพัะฐัั ัะพะปัะบะพ ะฟะพะบะฐ ะฒั ะดะตัะถะธัะต ัะตัะผะธะฝะฐะป ะพัะบััััะผ.

ะก ะฝะธะผ โ ัะฐะนั ัะฐะฑะพัะฐะตั **ะบััะณะปะพัััะพัะฝะพ**, **ััะฐะฑะธะปัะฝะพ** ะธ **ะฐะฒัะพะผะฐัะธัะตัะบะธ**.

**ะะฝะฐะปะพะณ ะดะปั Windows:** IIS ะธะปะธ ะฟัะพััะพ ะทะฐะฟััะบ ัะตัะตะท Task Scheduler
**ะะฝะฐะปะพะณ ะดะปั Docker:** docker-compose ั restart: always

ะะพ ะดะปั Node.js ะฝะฐ Linux PM2 โ **ััะฐะฝะดะฐัั ะธะฝะดััััะธะธ** โ

